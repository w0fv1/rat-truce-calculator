# 三角洲行动｜互相攻击概率计算器

这是一个基于博弈论和期望收益模型的 PvPvE 决策模拟器，专为《三角洲行动》“烽火地带”模式打造。它用于估算玩家在野外遭遇时，是否开火的合理概率与预期收益，结合装备价值、背包剩余、攻击欲望、环境风险等多个变量，帮助玩家和策划分析战术行为。

[👉 在线演示](https://w0fv1.github.io/rat-truce-calculator/)

---

## 🔧 功能特色

- 输入双方装备价值、攻击欲望等参数
- 自动计算期望收益、攻击概率、总交火概率
- 内置多个典型场景，一键切换
- 支持调节地图环境：服务器人数、剩余时间
- 显示置信区间 + 风险文字评语
- 高级参数完全开放，曲线控制灵活
- 支持“一键恢复默认参数”

---

## ✅ 使用方式

1. 下载仓库，双击打开 `index.html` 文件；
2. 拖动滑块或选择场景按钮；
3. 页面自动更新结果，无需刷新；
4. 可展开「高级参数」调节计算模型。

---

## 📐 数学建模说明

工具采用概率博弈建模，主要计算过程如下：

### 1. 背包剩余容量估算（C）

```text
C = max(0, 1 - (v / 5,000,000)^β )
```

- v 为当前装备价值
- β（默认 0.8）为背包装填速度指数

### 2. 攻击的期望收益 Δ

```text
Δ = C × 敌方装备价值 - 风险损耗
```

风险损耗计算如下：

```text
风险 = 装备价值 × riskRatio × (1 - ρ × C) × 环境倍率
```

环境倍率由地图剩余时间、第三方干预概率决定：

```text
倍率 = 1 + 0.5 × density + 0.5 × (1 - timeLeft)
```

### 3. 概率转换（逻辑斯蒂函数）

```text
P_base = 1 / (1 + e^( -k × Δ ))
```

- k 控制函数斜率（默认 0.000002）

### 4. 引入攻击欲望 Desire

最终攻击概率 P：

```text
P = (1 - Desire) × P_min + Desire × max(P_base, P_min)
```

- P_min：攻击欲望为 0 时的最小攻击概率（默认 0.10）

### 5. 双方交火总概率

```text
P_conflict = 1 - (1 - P_A) × (1 - P_B)
```

### 6. 攻击预期收益

```text
EG = P_base × Δ
```

---

## 📊 示例应用

- 分析不同装备之间的博弈行为（例如“上供”的有效性）
- 策划衡量攻击收益与撤离激励之间的平衡
- 用于生成 AI 玩家决策规则
- 复盘录像时还原开火动因


---

## 🧩 技术栈

- **HTML + Alpine.js**（轻量框架）
- 无需后端，纯前端运行
- 完全离线可用

---

## 📄 License

MIT License — 本项目可自由使用、修改和分发，用于非商业研究、教学与平衡设计参考。

---

📬 如需集成更多真实数据、玩家行为分析或 AI 博弈模拟，欢迎联系协作！
```
